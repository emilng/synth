!function e(t,n,a){function i(r,u){if(!n[r]){if(!t[r]){var c="function"==typeof require&&require;if(!u&&c)return c(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var s=n[r]={exports:{}};t[r][0].call(s.exports,function(e){var n=t[r][1][e];return i(n?n:e)},s,s.exports,e,t,n,a)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<a.length;r++)i(a[r]);return i}({1:[function(e){var t=e("./audio/generateNoteMappings.js"),n=e("./audio/updateOctave.js"),a=e("./ui/initKeyboard.js"),i=e("./ui/clickHandlers.js"),o=e("./ui/keyHandlers"),r=e("./ui/keyboardUpdate.js"),u=e("./ui/visualizerUpdate.js"),c=function(e){var t=u(e),n=function(){e.notesChanged&&(r(e),e.notesChanged=!1),t(),requestAnimationFrame(n)};return n},d=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext;var e=new AudioContext,r=["A","W","S","E","D","F","T","G","Y","H","U","J","K","O","L","P",";","'"],u=(r.map(function(){return e.createGain()}),r.map(function(){return!1})),d=e.createGain();d.gain.value=.5;var s=e.createDynamicsCompressor(),f=e.createAnalyser();d.connect(s),s.connect(f),f.connect(e.destination);var v=document.getElementById("visualizer"),l={audio:{context:e,gainNodes:[],masterGain:d,analyser:f,octave:3,notes:null,activeNotes:u},ui:{keyChars:r,keyboard:null,keyDimensions:null,keyOffsets:[],visualizer:v},notesChanged:!0};l.audio.notes=t(),l.ui.keyboard=a(l),i.noteClick(l),i.octaveClick(l),n(l,0);var h=c(l);requestAnimationFrame(h),document.addEventListener("mouseup",i.noteOff(l)),document.addEventListener("keydown",o.keyDown(l)),document.addEventListener("keyup",o.keyUp(l))};window.addEventListener("load",d,!1)},{"./audio/generateNoteMappings.js":2,"./audio/updateOctave.js":5,"./ui/clickHandlers.js":6,"./ui/initKeyboard.js":7,"./ui/keyHandlers":8,"./ui/keyboardUpdate.js":9,"./ui/visualizerUpdate.js":10}],2:[function(e,t){var n=function(){for(var e=1.059463094359,t=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],n=440,a=-4,i=3,o=21+i,r=[],u=0;88>u;){var c=u+i,d=c%12,s=Math.floor(c/12),f=n*Math.pow(e,12*a+c),v=u+o;r.push({frequency:f,midi:v,name:t[d],octave:s}),u++}return r};t.exports=n},{}],3:[function(e,t){var n=function(e,t){var n=e.audio,a=n.context.currentTime,i=void 0!==t&&n.activeNotes[t]===!0;if(i){var o=n.gainNodes[t];o.gain.cancelScheduledValues(a),o.gain.setTargetAtTime(0,a,.1),n.activeNotes[t]=!1,e.notesChanged=!0}else n.activeNotes=n.activeNotes.map(function(e,i){if(e){var o=n.gainNodes[i];o.gain.cancelScheduledValues(a),o.gain.setTargetAtTime(0,a,.1),n.activeNotes[t]=!1}return!1}),e.notesChanged=!0};t.exports=n},{}],4:[function(e,t){var n=function(e,t){var n=e.audio,a=n.octave;t>=n.activeNotes.length&&(a++,t-=n.activeNotes.length);var i=n.activeNotes[t];if(!i){var o=n.context.currentTime;n.activeNotes[t]=!0;var r=n.notes,u=12*a+t;if(u<r.length-1){var c=r[u],d=n.context.createOscillator(),s=n.context.createGain();n.gainNodes[t]=s,d.connect(s),s.connect(n.masterGain),d.type=d.SINE,d.noteIndex=u,d.frequency.value=c.frequency,d.start(o),s.gain.cancelScheduledValues(o),s.gain.setValueAtTime(0,o),s.gain.setTargetAtTime(1,o,.1),e.notesChanged=!0}}};t.exports=n},{}],5:[function(e,t){var n=function(e,t){var n=e.audio;n.octave=Math.max(0,Math.min(6,n.octave+t));var a=document.getElementById("octave-display");a.innerHTML="Octave "+n.octave};t.exports=n},{}],6:[function(e,t,n){var a=e("../audio/noteOn.js"),i=e("../audio/noteOff.js"),o=e("../audio/updateOctave.js"),r=function(e){for(var t=function(e,t){return function(){a(e,t)}},n=0;18>n;){var i=document.getElementById("key-"+n);i.addEventListener("mousedown",t(e,n)),n++}},u=function(e){var t=function(e,t){return function(){o(e,t)}},n=document.getElementById("octave-down");n.addEventListener("click",t(e,-1));var a=document.getElementById("octave-up");a.addEventListener("click",t(e,1))},c=function(e){return function(){i(e)}};n.noteClick=r,n.octaveClick=u,n.noteOff=c},{"../audio/noteOff.js":3,"../audio/noteOn.js":4,"../audio/updateOctave.js":5}],7:[function(e,t){var n=function(e){var t=(document.getElementById("full-keyboard"),document.createElement("canvas"));t.setAttribute("width",400),t.setAttribute("height",30);var n=t.getContext("2d"),a=e.ui.keyDimensions={black:{width:4,height:14},white:{width:6,height:22}},i=Math.round(a.white.width/2);n.strokeStyle="#000",n.lineWidth=1,n.fillStyle="#000";for(var o=87,r=0,u=e.audio.notes,c=e.ui.keyOffsets,d=0;o>d;d++)1===u[d].name.length?(c.push(r),r+=a.white.width):c.push(r-i+1);return c.map(function(e,t){1===u[t].name.length&&n.strokeRect(e,0,a.white.width,a.white.height)}),c.map(function(e,t){2===u[t].name.length&&n.fillRect(e,0,a.black.width,a.black.height)}),n.getImageData(0,0,t.width,t.height)};t.exports=n},{}],8:[function(e,t,n){var a=e("../audio/noteOn.js"),i=e("../audio/noteOff.js"),o=e("../audio/updateOctave.js"),r=function(e,t){return keyChar=186===t||59===t?";":222===t||39===t?"'":String.fromCharCode(t),e.ui.keyChars.indexOf(keyChar)},u=function(e){return function(t){var n=t.keyCode;if(!(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)){var i=r(e,n);i>-1&&(a(e,i),t.preventDefault());var u=String.fromCharCode(n);"Z"===u?o(e,-1):"X"===u&&o(e,1)}}},c=function(e){return function(t){var n=r(e,t.keyCode);n>-1&&i(e,n)}};n.keyUp=c,n.keyDown=u},{"../audio/noteOff.js":3,"../audio/noteOn.js":4,"../audio/updateOctave.js":5}],9:[function(e,t){var n=function(e){var t=e.audio,n=e.ui,a=document.getElementById("full-keyboard"),i=a.getContext("2d");i.putImageData(n.keyboard,0,0);e.keys;i.fillStyle="rgba(140,140,140,0.8)",t.activeNotes.map(function(e,a){var o=document.getElementById("key-"+a),r=n.keyOffsets[12*t.octave+a],u=t.notes[12*t.octave+a],c=1===u.name.length?"white":"black";e?(i.fillRect(r,0,n.keyDimensions[c].width,n.keyDimensions[c].height),o.setAttribute("class","down-"+c+"-key")):o.setAttribute("class",c+"-key")})};t.exports=n},{}],10:[function(e,t){var n=function(e){var t=e.ui.visualizer,n=e.audio.analyser;n.fftSize=2048;var a=n.fftSize,i=new Uint8Array(a),o=t.getContext("2d"),r=t.width,u=t.height,c=function(){n.getByteTimeDomainData(i),o.clearRect(0,0,r,u),o.fillStyle="rgb(200, 200, 200)",o.fillRect(0,0,r,u),o.beginPath();for(var e=r*(1/a),t=0,c=0;a>c;c++){var d=i[c]/128,s=d*u/2;0===c?o.moveTo(t,s):o.lineTo(t,s),t+=e}o.lineTo(r,u/2),o.stroke()};return c};t.exports=n},{}]},{},[1]);
//# sourceMappingURL=synth.min.js.map